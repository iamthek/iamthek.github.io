//================================================================================ 
// SuperMap IS .NET 客户端程序，版权所有，北京超图软件股份有限公司，2000-2008。 
// 本程序只能在有效的授权许可下使用。未经许可，不得以任何手段擅自使用或传播。 
// 作 者:  SuperMap IS Web Team 
// 版 本:  $Id: SuperMap.IS.EditManager.js,v 1.21 2010/02/01 05:45:31 zhangyt Exp $
// 文 件:  SuperMap.IS.EditManager.js 
// 描 述:  AjaxScripts 编辑管理器 
// 更 新:  $Date: 2010/02/01 05:45:31 $ 
//================================================================================ 
SuperMap.IS.EditManager=function(C,I){var L=C+"edit.ashx";var D=null;var G=null;function H(O,P){D=O;G=P}this.RegisterHandler=H;function F(S,W,O,U,P,R,T){function V(Z){if(!Z){return }var Y=eval("("+Z+")");if(Y==null){P(null,T);return }var X=new SuperMap.IS.EditResult();X.FromJSON(Y);if(P){P(X,T)}X.Destroy();X=null}var Q=new SuperMap.IS.RequestManager(L,V,R,T);Q.AddQueryString("map",S);Q.AddQueryString("method",W);Q.AddQueryStrings(O,U);Q.Send();Q.Destroy();Q=null;while(O.length>0){O.pop();U.pop()}O=null;U=null}this.AddEntity=function(P,O,S,R,Q,T){F(P,"AddEntity",["layerName","entities"],[O,S],R,Q,T)};this.AddEntityByUserID=function(Q,P,T,O,S,R,U){F(Q,"AddEntityByUserID",["layerName","entities","userID"],[P,T,O],S,R,U)};this.DeleteEntity=function(Q,O,P,S,R,T){F(Q,"DeleteEntity",["layerName","ids"],[O,P],S,R,T)};this.DeleteEntityByUserID=function(R,P,Q,O,T,S,U){F(R,"DeleteEntityByUserID",["layerName","ids","userID"],[P,Q,O],T,S,U)};this.UpdateEntity=function(P,O,S,R,Q,T){F(P,"UpdateEntity",["layerName","entities"],[O,S],R,Q,T)};this.UpdateEntityByUserID=function(Q,P,T,O,S,R,U){F(Q,"UpdateEntityByUserID",["layerName","entities","userID"],[P,T,O],S,R,U)};this.AddPoint=function(U,S,W,X,O,P,R,V){var Q=new SuperMap.IS.Entity();Q.shape=new SuperMap.IS.Geometry();Q.shape.parts=new Array();Q.shape.parts[0]=1;Q.shape.feature=SuperMap.IS.LayerType.point;Q.shape.points=new Array(W);Q.fieldNames=X;Q.fieldValues=O;var T=new Array(Q);F(U,"AddEntity",["layerName","entities"],[S,T],P,R,V)};this.AddPointByUserID=function(U,S,W,Y,O,X,P,R,V){var Q=new SuperMap.IS.Entity();Q.shape=new SuperMap.IS.Geometry();Q.shape.parts=new Array();Q.shape.parts[0]=1;Q.shape.feature=SuperMap.IS.LayerType.point;Q.shape.points=new Array(W);Q.fieldNames=Y;Q.fieldValues=O;var T=new Array(Q);F(U,"AddEntityByUserID",["layerName","entities","userID"],[S,T,X],P,R,V)};this.AddLine=function(U,S,W,X,O,P,R,V){var Q=new SuperMap.IS.Entity();Q.shape=new SuperMap.IS.Geometry();Q.shape.parts=new Array();Q.shape.parts[0]=W.length;Q.shape.feature=SuperMap.IS.LayerType.line;Q.shape.points=W;Q.fieldNames=X;Q.fieldValues=O;var T=new Array(Q);F(U,"AddEntity",["layerName","entities"],[S,T],P,R,V)};this.AddLineByUserID=function(U,S,W,Y,O,X,P,R,V){var Q=new SuperMap.IS.Entity();Q.shape=new SuperMap.IS.Geometry();Q.shape.parts=new Array();Q.shape.parts[0]=W.length;Q.shape.feature=SuperMap.IS.LayerType.line;Q.shape.points=W;Q.fieldNames=Y;Q.fieldValues=O;var T=new Array(Q);F(U,"AddEntityByUserID",["layerName","entities","userID"],[S,T,X],P,R,V)};this.AddPolygon=function(U,S,W,X,O,P,R,V){var Q=new SuperMap.IS.Entity();Q.shape=new SuperMap.IS.Geometry();Q.shape.parts=new Array();Q.shape.parts[0]=W.length;Q.shape.feature=SuperMap.IS.LayerType.polygon;Q.shape.points=W;Q.fieldNames=X;Q.fieldValues=O;var T=new Array(Q);F(U,"AddEntity",["layerName","entities"],[S,T],P,R,V)};this.AddPolygonByUserID=function(U,S,W,Y,O,X,P,R,V){var Q=new SuperMap.IS.Entity();Q.shape=new SuperMap.IS.Geometry();Q.shape.parts=new Array();Q.shape.parts[0]=W.length;Q.shape.feature=SuperMap.IS.LayerType.polygon;Q.shape.points=W;Q.fieldNames=Y;Q.fieldValues=O;var T=new Array(Q);F(U,"AddEntityByUserID",["layerName","entities","userID"],[S,T,X],P,R,V)};this.UpdatePoint=function(V,T,O,X,Y,P,Q,S,W){var R=new SuperMap.IS.Entity();R.shape=new SuperMap.IS.Geometry();R.shape.parts=new Array();R.shape.parts[0]=1;R.id=O;R.shape.feature=SuperMap.IS.LayerType.point;R.shape.points=new Array(X);R.fieldNames=Y;R.fieldValues=P;var U=new Array(R);F(V,"UpdateEntity",["layerName","entities"],[T,U],Q,S,W)};this.UpdatePointByUserID=function(V,T,O,X,Z,P,Y,Q,S,W){var R=new SuperMap.IS.Entity();R.shape=new SuperMap.IS.Geometry();R.shape.parts=new Array();R.shape.parts[0]=1;R.id=O;R.shape.feature=SuperMap.IS.LayerType.point;R.shape.points=new Array(X);R.fieldNames=Z;R.fieldValues=P;var U=new Array(R);F(V,"UpdateEntityByUserID",["layerName","entities","userID"],[T,U,Y],Q,S,W)};this.UpdateLine=function(V,T,O,X,Y,P,Q,S,W){var R=new SuperMap.IS.Entity();R.shape=new SuperMap.IS.Geometry();R.shape.parts=new Array();R.shape.parts[0]=X.length;R.id=O;R.shape.feature=SuperMap.IS.LayerType.line;R.shape.points=X;R.fieldNames=Y;R.fieldValues=P;var U=new Array(R);F(V,"UpdateEntity",["layerName","entities"],[T,U],Q,S,W)};this.UpdateLineByUserID=function(V,T,O,X,Z,P,Y,Q,S,W){var R=new SuperMap.IS.Entity();R.shape=new SuperMap.IS.Geometry();R.shape.parts=new Array();R.shape.parts[0]=X.length;R.id=O;R.shape.feature=SuperMap.IS.LayerType.line;R.shape.points=X;R.fieldNames=Z;R.fieldValues=P;var U=new Array(R);F(V,"UpdateEntityByUserID",["layerName","entities","userID"],[T,U,Y],Q,S,W)};this.UpdatePolygon=function(V,T,O,X,Y,P,Q,S,W){var R=new SuperMap.IS.Entity();R.shape=new SuperMap.IS.Geometry();R.shape.parts=new Array();R.shape.parts[0]=X.length;R.id=O;R.shape.feature=SuperMap.IS.LayerType.polygon;R.shape.points=X;R.fieldNames=Y;R.fieldValues=P;var U=new Array(R);F(V,"UpdateEntity",["layerName","entities"],[T,U],Q,S,W)};this.UpdatePolygonByUserID=function(V,T,O,X,Z,P,Y,Q,S,W){var R=new SuperMap.IS.Entity();R.shape=new SuperMap.IS.Geometry();R.shape.parts=new Array();R.shape.parts[0]=X.length;R.id=O;R.shape.feature=SuperMap.IS.LayerType.polygon;R.shape.points=X;R.fieldNames=Z;R.fieldValues=P;var U=new Array(R);F(V,"UpdateEntityByUserID",["layerName","entities","userID"],[T,U,Y],Q,S,W)};function B(O,V,T,S,Q,U){function R(Y){if(!Y){return }var X=eval("("+Y+")");if(X==null){S(null,U);return }var W=new SuperMap.IS.DatasetOperateResult();W.FromJSON(X);if(S){S(W,U)}W.Destroy();W=null}var P=new SuperMap.IS.RequestManager(L,R,Q,U);P.AddQueryString("map",I);P.AddQueryString("method",O);P.AddQueryStrings(V,T);P.Send();P.Destroy();P=null;while(V.length>0){V.pop();T.pop()}V=null;T=null}this.CopyDataset=function(P,O,R,Q,S){B("CopyDataset",["copyDatasetParam","resultDatasetCopyParam"],[P,O],R,Q,S)};this.CopyDatasetByUserID=function(P,O,Q,S,R,T){B("CopyDatasetByUserID",["copyDatasetParam","resultDatasetCopyParam","userID"],[P,O,Q],S,R,T)};this.CreateDataset=function(P,Q,O,R){B("CreateDataset",["createDatasetParam"],[P],Q,O,R)};this.CreateDatasetByUserID=function(Q,O,R,P,S){B("CreateDatasetByUserID",["createDatasetParam","userID"],[Q,O],R,P,S)};this.DeleteDataset=function(Q,P,O,R){B("DeleteDataset",["dataset"],[Q],P,O,R)};this.DeleteDatasetByUserID=function(R,O,Q,P,S){B("DeleteDatasetByUserID",["dataset","userID"],[R,O],Q,P,S)};function K(O,V,T,S,Q,U){function R(Y){if(!Y){return }var X=eval("("+Y+")");if(X==null){S(null,U);return }var W=new SuperMap.IS.GetFieldsResult();W.FromJSON(X);if(S){S(W,U)}W.Destroy();W=null}var P=new SuperMap.IS.RequestManager(L,R,Q,U);P.AddQueryString("map",I);P.AddQueryString("method",O);P.AddQueryStrings(V,T);P.Send();P.Destroy();P=null;while(V.length>0){V.pop();T.pop()}V=null;T=null}this.GetExternalTableFieldInfos=function(R,O,Q,P,S){K("GetExternalTableFieldInfos",["strTableName","datasourceName"],[R,O],Q,P,S)};function J(O,V,T,S,Q,U){function R(Y){if(!Y){return }var X=eval("("+Y+")");if(X==null){S(null,U);return }var W=new SuperMap.IS.GetExternalTableNamesResult();W.FromJSON(X);if(S){S(W,U)}W.Destroy();W=null}var P=new SuperMap.IS.RequestManager(L,R,Q,U);P.AddQueryString("map",I);P.AddQueryString("method",O);P.AddQueryStrings(V,T);P.Send();P.Destroy();P=null;while(V.length>0){V.pop();T.pop()}V=null;T=null}this.GetExternalTableNames=function(O,Q,P,R){J("GetExternalTableNames",["datasourceName"],[O],Q,P,R)};function N(O,V,T,S,Q,U){function R(Y){if(!Y){return }var X=eval("("+Y+")");if(X==null){S(null,U);return }var W=new SuperMap.IS.ExternalTableOperatorResult();W.FromJSON(X);if(S){S(W,U)}W.Destroy();W=null}var P=new SuperMap.IS.RequestManager(L,R,Q,U);P.AddQueryString("map",I);P.AddQueryString("method",O);P.AddQueryStrings(V,T);P.Send();P.Destroy();P=null;while(V.length>0){V.pop();T.pop()}V=null;T=null}this.AddExternalTable=function(S,U,O,P,R,Q,T){N("AddExternalTable",["strTableName","strDTName","datasourceName","userID"],[S,U,O,P],R,Q,T)};this.RemoveExternalTable=function(T,O,P,R,Q,S){N("RemoveExternalTable",["strDTName","datasourceName","userID"],[T,O,P],R,Q,S)};this.RegisterExternalTable=function(U,O,Q,P,S,R,T){N("RegisterExternalTable",["strDTName","datasourceName","bCreateSmID","userID"],[U,O,Q,P],S,R,T)};this.UnRegisterExternalTable=function(T,O,P,R,Q,S){N("UnRegisterExternalTable",["strDTName","datasourceName","userID"],[T,O,P],R,Q,S)};function E(O,V,T,S,Q,U){function R(Y){if(!Y){return }var X=eval("("+Y+")");if(X==null){S(null,U);return }var W=new SuperMap.IS.FieldOperateResult();W.FromJSON(X);if(S){S(W,U)}W.Destroy();W=null}var P=new SuperMap.IS.RequestManager(L,R,Q,U);P.AddQueryString("map",I);P.AddQueryString("method",O);P.AddQueryStrings(V,T);P.Send();P.Destroy();P=null;while(V.length>0){V.pop();T.pop()}V=null;T=null}this.CopyField=function(S,O,P,R,Q,T){E("CopyField",["dataset","sourceFieldName","targetFieldName"],[S,O,P],R,Q,T)};this.CopyFieldByUserID=function(T,O,Q,P,S,R,U){E("CopyFieldByUserID",["dataset","sourceFieldName","targetFieldName","userID"],[T,O,Q,P],S,R,U)};this.CreateField=function(S,R,O,Q,P,T){E("CreateField",["dataset","field","overwriteIfExists"],[S,R,O],Q,P,T)};this.CreateFieldByUserID=function(T,S,P,O,R,Q,U){E("CreateFieldByUserID",["dataset","field","overwriteIfExists","userID"],[T,S,P,O],R,Q,U)};this.DeleteField=function(Q,S,P,O,R){E("DeleteField",["dataset","fieldName"],[Q,S],P,O,R)};this.DeleteFieldByUserID=function(R,T,O,Q,P,S){E("DeleteFieldByUserID",["dataset","fieldName","userID"],[R,T,O],Q,P,S)};this.SetField=function(R,T,Q,P,O,S){E("SetField",["dataset","fieldName","field"],[R,T,Q],P,O,S)};this.SetFieldByUserID=function(S,U,R,O,Q,P,T){E("SetFieldByUserID",["dataset","fieldName","field","userID"],[S,U,R,O],Q,P,T)};this.UpdateFieldValues=function(R,U,S,O,Q,P,T){E("UpdateFieldValues",["dataset","fieldName","expression","filter"],[R,U,S,O],Q,P,T)};this.UpdateFieldValuesByUserID=function(S,V,T,P,O,R,Q,U){E("UpdateFieldValuesByUserID",["dataset","fieldName","expression","filter","userID"],[S,V,T,P,O],R,Q,U)};function A(S,W,O,U,P,R,T){function V(X){if(X==null){return }if(P){P(X,T)}}var Q=new SuperMap.IS.RequestManager(L,V,R,T);Q.AddQueryString("map",S);Q.AddQueryString("method",W);Q.AddQueryStrings(O,U);Q.Send();Q.Destroy();Q=null;while(O.length>0){O.pop();U.pop()}O=null;U=null}this.LockLayer=function(P,O,T,R,Q,S){A(P,"LockLayer",["layerName","clientID"],[O,T],R,Q,S)};function M(S,W,O,U,P,R,T){function V(Y){if(Y==null){return }var X=eval("("+Y+")");if(P){P(X,T)}}var Q=new SuperMap.IS.RequestManager(L,V,R,T);Q.AddQueryString("map",S);Q.AddQueryString("method",W);Q.AddQueryStrings(O,U);Q.Send();Q.Destroy();Q=null;while(O.length>0){O.pop();U.pop()}O=null;U=null}this.UnlockLayer=function(Q,P,O,S,R,T){M(Q,"UnlockLayer",["layerName","userID"],[P,O],S,R,T)}}
